<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">lib/base.js | lseqtree API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/chat-wane/LSEQTree" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/base.js~Base.html">Base</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/exoutofbounds.js~ExOutOfBounds.html">ExOutOfBounds</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/identifier.js~Identifier.html">Identifier</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/lseqnode.js~LSeqNode.html">LSeqNode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/lseqtree.js~LSeqTree.html">LSeqTree</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/strategy.js~Strategy.html">Strategy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/triple.js~Triple.html">Triple</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">lib/base.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;

/**
 * Configuration and util class of the base, i.e. the maximal arity of the first
 * level of the tree.
 */
class Base {
    /**
     * @param {Number} [b = 3] The number of bits at level 0 of the dense space.
     */
    constructor (b = 3) {
        this._b = b;
    };

    /**
     * Process the number of bits usage at a certain level of dense space.
     * @param {Number} level The level in dense space, i.e., the number of
     * concatenations of the identifier.
     * @return {Number} The number of bit to encode a single path concatenation
     * at the depth in argument.
     */
    getBitBase (level) {
        return this._b + level;
    };

    /**
     * Process the total number of bits usage to get to a certain level.
     * @param {Number} level The level in dense space, i.e., the number of
     * concatenations of the identifier.
     * @return {Number} The number of bits required to encode the path
     * comprising level concatenations.
     */
    getSumBit (level) {
        const n = this.getBitBase(level);
        const m = this._b - 1;       
        return (n * (n + 1)) / 2 - (m * (m + 1) / 2);
    };

    /**
     * Process the number of possible paths between two LSEQNode.
     * @param {Number} level The depth of the tree to process.
     * @param {LSeqNode} p The previous LSeqNode.
     * @param {LSeqNode} q The next LSeqNode.
     * @return {Number} The interval between the two nodes at the depth in
     * argument.
     */
    getInterval (level, p, q) {               
        let sum = 0, i = 0,
            pIsGreater = false, commonRoot = true,
            prevValue = 0, nextValue = 0;
        
        while (i &lt;= level) {
            prevValue = (p &amp;&amp; p.t.p) || 0;
            nextValue = (q &amp;&amp; q.t.p) || 0;            
            // #1 check if paths are identical
            if (commonRoot &amp;&amp; prevValue !== nextValue) {
                commonRoot = false;
                pIsGreater = prevValue &gt; nextValue;
            }
            // #2 process the value to add to interval
            if (pIsGreater) { nextValue = Math.pow(2,this.getBitBase(i))-1; }
            if (commonRoot || pIsGreater || i !== level) {
                sum += nextValue - prevValue; 
            } else {
                sum += nextValue - prevValue - 1;
            }
            if (i!==level){ sum *= Math.pow(2,this.getBitBase(i+1)); };
            // #3 iterate over path concatenations
            p = p &amp;&amp; p.child || null;
            q = q &amp;&amp; q.child || null;
            ++i;
        }
        return sum;
    };
    
};

module.exports = Base;
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
